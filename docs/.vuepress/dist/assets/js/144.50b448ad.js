(window.webpackJsonp=window.webpackJsonp||[]).push([[144],{529:function(e,s,t){"use strict";t.r(s);var a=t(54),n=Object(a.a)({},(function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"使用kubectl连接远程k8s集群"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用kubectl连接远程k8s集群"}},[e._v("#")]),e._v(" 使用kubectl连接远程k8s集群")]),e._v(" "),t("h2",{attrs:{id:"什么是kubectl"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#什么是kubectl"}},[e._v("#")]),e._v(" 什么是kubectl")]),e._v(" "),t("ul",[t("li",[e._v("kubectl是kubernetes的客户顿啊程序")]),e._v(" "),t("li",[e._v("是用于运行kubernetes集群命令的管理工具")]),e._v(" "),t("li",[e._v("提供了大量子命令可以让用户和集群进行交互")]),e._v(" "),t("li",[e._v("不一定部署在master上，用户可以通过kubectl 连接到master上")])]),e._v(" "),t("h2",{attrs:{id:"安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[e._v("#")]),e._v(" 安装")]),e._v(" "),t("p",[e._v("macOS下直接使用homebrew 管理工具进行安装")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("brew install kubernetes-cli\n")])])]),t("p",[e._v("确认是否安装成功：")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("kubectl version\n")])])]),t("h2",{attrs:{id:"基本语法"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#基本语法"}},[e._v("#")]),e._v(" 基本语法")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("kubectl [command] [TYPE] [NAME] [flags]\n")])])]),t("h2",{attrs:{id:"配置kubectl"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置kubectl"}},[e._v("#")]),e._v(" 配置kubectl")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("# 配置集群名称与服务地址\nkubectl config --kubeconfig=${HOME}/.kube/config set-cluster cluster-name --server=https://{IP} --inspecure-skip-tls-verify\n\n# 设置一个管理用户为admin，并设置访问凭证。此处使用用户名和密码的验证方式\nkubectl config  --kubeconfig=${HOME}/.kube/config set-credentials admin --username=username --password=pwd\n\n# 设置一个名为admin的配置，使用cluster-name集群与admin 用户的上下文\nkubectl config --kubeconfig=${HOME}/.kube/config set-context admin --cluster-cluster-name --namespace=test --user=admin\n\n# 启用admin为默认上下文\nkubectl config --kubeconfig=${HOME}/.kube/config use-context admin\n")])])]),t("h2",{attrs:{id:"预览配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#预览配置"}},[e._v("#")]),e._v(" 预览配置")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("$ kubectl config view\napiVersion: v1\nclusters:\n- cluster:\n    insecure-skip-tls-verify: true\n    server: https://{IP}\n  name: cluster-name\ncontexts:\n- context:\n    cluster: cluster-name\n    namespace: test\n    user: admin\n  name: admin\ncurrent-context: admin\nkind: Config\npreferences: {}\nusers:\n- name: admin\n  user:\n    password: pwd\n    username: username\n")])])]),t("h2",{attrs:{id:"验证配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#验证配置"}},[e._v("#")]),e._v(" 验证配置")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("$ kubectl cluster-info\nKubernetes master is running at https://{IP}\nGLBCDefaultBackend is running at https://{IP}/api/v1/namespaces/kube-system/services/default-http-backend:http/proxy\nHeapster is running at https://{IP}/api/v1/namespaces/kube-system/services/heapster/proxy\nKubeDNS is running at https://{IP}/api/v1/namespaces/kube-system/services/kube-dns:dns/proxy\nkubernetes-dashboard is running at https://{IP}/api/v1/namespaces/kube-system/services/https:kubernetes-dashboard:/proxy\nMetrics-server is running at https://{IP}/api/v1/namespaces/kube-system/services/https:metrics-server:/proxy\n")])])]),t("p",[e._v("查看集群节点：")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("$ kubectl get node\nNAME                                          STATUS    ROLES     AGE       VERSION\ngke-ci-cluster-1-default-pool-a7b52541-075v   Ready     <none>    3d        v1.9.7-gke.5\n")])])]),t("p",[e._v("若以上输出正常，证明连接成功")])])}),[],!1,null,null,null);s.default=n.exports}}]);